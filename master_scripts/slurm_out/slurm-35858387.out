> args <- commandArgs(trailingOnly = TRUE)
> 
> library(rmarkdown)
> rmarkdown::render(args[1])


processing file: s4-1-1-tss-definition_v3.rmd
  |                                                                              |                                                                      |   0%  |                                                                              |..                                                                    |   3%
   inline R code fragments

  |                                                                              |....                                                                  |   5%
label: load_libraries (with options) 
List of 2
 $ message: logi FALSE
 $ warning: logi FALSE

Loading required package: GenomicRanges
Loading required package: stats4
Loading required package: BiocGenerics
Loading required package: parallel

Attaching package: 'BiocGenerics'

The following objects are masked from 'package:parallel':

    clusterApply, clusterApplyLB, clusterCall, clusterEvalQ,
    clusterExport, clusterMap, parApply, parCapply, parLapply,
    parLapplyLB, parRapply, parSapply, parSapplyLB

The following objects are masked from 'package:stats':

    IQR, mad, sd, var, xtabs

The following objects are masked from 'package:base':

    anyDuplicated, append, as.data.frame, basename, cbind, colnames,
    dirname, do.call, duplicated, eval, evalq, Filter, Find, get, grep,
    grepl, intersect, is.unsorted, lapply, Map, mapply, match, mget,
    order, paste, pmax, pmax.int, pmin, pmin.int, Position, rank,
    rbind, Reduce, rownames, sapply, setdiff, sort, table, tapply,
    union, unique, unsplit, which, which.max, which.min

Loading required package: S4Vectors

Attaching package: 'S4Vectors'

The following object is masked from 'package:base':

    expand.grid

Loading required package: IRanges
Loading required package: GenomeInfoDb
Loading required package: AnnotationDbi
Loading required package: Biobase
Welcome to Bioconductor

    Vignettes contain introductory material; view with
    'browseVignettes()'. To cite Bioconductor, see
    'citation("Biobase")', and for packages 'citation("pkgname")'.

Loading required package: SummarizedExperiment
Loading required package: DelayedArray
Loading required package: matrixStats

Attaching package: 'matrixStats'

The following objects are masked from 'package:Biobase':

    anyMissing, rowMedians

Loading required package: BiocParallel

Attaching package: 'DelayedArray'

The following objects are masked from 'package:matrixStats':

    colMaxs, colMins, colRanges, rowMaxs, rowMins, rowRanges

The following objects are masked from 'package:base':

    aperm, apply, rowsum

Loading required package: Biostrings
Loading required package: XVector

Attaching package: 'Biostrings'

The following object is masked from 'package:base':

    strsplit

Loading required package: Rsamtools

Attaching package: 'dplyr'

The following objects are masked from 'package:GenomicAlignments':

    first, last

The following objects are masked from 'package:Biostrings':

    collapse, intersect, setdiff, setequal, union

The following object is masked from 'package:XVector':

    slice

The following object is masked from 'package:matrixStats':

    count

The following object is masked from 'package:AnnotationDbi':

    select

The following object is masked from 'package:Biobase':

    combine

The following objects are masked from 'package:GenomicRanges':

    intersect, setdiff, union

The following object is masked from 'package:GenomeInfoDb':

    intersect

The following objects are masked from 'package:IRanges':

    collapse, desc, intersect, setdiff, slice, union

The following objects are masked from 'package:S4Vectors':

    first, intersect, rename, setdiff, setequal, union

The following objects are masked from 'package:BiocGenerics':

    combine, intersect, setdiff, union

The following objects are masked from 'package:stats':

    filter, lag

The following objects are masked from 'package:base':

    intersect, setdiff, setequal, union


Attaching package: 'data.table'

The following objects are masked from 'package:dplyr':

    between, first, last

The following objects are masked from 'package:GenomicAlignments':

    first, last, second

The following object is masked from 'package:SummarizedExperiment':

    shift

The following object is masked from 'package:GenomicRanges':

    shift

The following object is masked from 'package:IRanges':

    shift

The following objects are masked from 'package:S4Vectors':

    first, second

  |                                                                              |......                                                                |   8%
  ordinary text without R code

  |                                                                              |.......                                                               |  11%
label: define_base_samples
  |                                                                              |.........                                                             |  13%
  ordinary text without R code

  |                                                                              |...........                                                           |  16%
label: pool_tss_per_sample
[bam_sort_core] merging from 1 files and 1 in-memory blocks...
[bam_sort_core] merging from 1 files and 1 in-memory blocks...
[bam_sort_core] merging from 1 files and 1 in-memory blocks...
[bam_sort_core] merging from 1 files and 1 in-memory blocks...
[bam_sort_core] merging from 1 files and 1 in-memory blocks...
[bam_sort_core] merging from 1 files and 1 in-memory blocks...
[bam_sort_core] merging from 1 files and 1 in-memory blocks...
[bam_sort_core] merging from 1 files and 1 in-memory blocks...
[bam_sort_core] merging from 1 files and 1 in-memory blocks...
[bam_sort_core] merging from 1 files and 1 in-memory blocks...
[bam_sort_core] merging from 1 files and 1 in-memory blocks...
[bam_sort_core] merging from 2 files and 1 in-memory blocks...
[bam_sort_core] merging from 1 files and 1 in-memory blocks...
  |                                                                              |.............                                                         |  18%
  ordinary text without R code

  |                                                                              |...............                                                       |  21%
label: pool_all_sample_group_tss_data
  |                                                                              |.................                                                     |  24%
  ordinary text without R code

  |                                                                              |..................                                                    |  26%
label: clustering_pooled_tss_data
  |                                                                              |....................                                                  |  29%
  ordinary text without R code

  |                                                                              |......................                                                |  32%
label: preparation_of_FANTOM_cage_data
  |                                                                              |........................                                              |  34%
  ordinary text without R code

  |                                                                              |..........................                                            |  37%
label: prepration_of_5end_seq_data
  |                                                                              |............................                                          |  39%
  ordinary text without R code

  |                                                                              |.............................                                         |  42%
label: run_dpi
qsub_v:dpi_out_path=../../results/s4-tss-definition-and-tx-assignment/s4-1-tss-definition/s4-1-4-tss-by-dpi/dpi-output-bed,dpi_ctss_path=../../results/s4-tss-definition-and-tx-assignment/s4-1-tss-definition/s4-1-4-tss-by-dpi/dpi-input-bed/*.ctss.bed.gz,dpi_genome=/camp/lab/ratcliffep/home/users/sugimoy/CAMP_HPC/projects/20211102_HP5_HIF_mTOR/annotation/hg38_annotation/star_indices/chrNameLength.txt,decomposition=y,installed_dir=/camp/home/sugimoy/home/CAMP_HPC/software/source_files/dpi1,curr_dir=/camp/home/sugimoy/home/CAMP_HPC/projects/20211102_HP5_HIF_mTOR/R/s4-tss-definition,PATH_OVERRIDE=/camp/lab/ratcliffep/home/users/sugimoy/CAMP_HPC/software/miniconda3_20200606/envs/run_dpi_v2/bin:/camp/lab/ratcliffep/home/users/sugimoy/CAMP_HPC/software/miniconda3_20200606/condabin:/usr/lib64/qt-3.3/bin:/usr/local/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/camp/home/sugimoy/.local/bin:/camp/home/sugimoy/bin
 rm -rf /camp/home/sugimoy/home/CAMP_HPC/projects/20211102_HP5_HIF_mTOR/R/s4-tss-definition/../../results/s4-tss-definition-and-tx-assignment/s4-1-tss-definition/s4-1-4-tss-by-dpi/dpi-output-bed/outPooled/* 
 rm -rf /camp/home/sugimoy/home/CAMP_HPC/projects/20211102_HP5_HIF_mTOR/R/s4-tss-definition/../../results/s4-tss-definition-and-tx-assignment/s4-1-tss-definition/s4-1-4-tss-by-dpi/dpi-output-bed/outCounts/* 
 rm -rf /camp/home/sugimoy/home/CAMP_HPC/projects/20211102_HP5_HIF_mTOR/R/s4-tss-definition/../../results/s4-tss-definition-and-tx-assignment/s4-1-tss-definition/s4-1-4-tss-by-dpi/dpi-output-bed/outTpm/*    
 rm -rf /camp/home/sugimoy/home/CAMP_HPC/projects/20211102_HP5_HIF_mTOR/R/s4-tss-definition/../../results/s4-tss-definition-and-tx-assignment/s4-1-tss-definition/s4-1-4-tss-by-dpi/dpi-output-bed/log/*       
 mkdir -p /camp/home/sugimoy/home/CAMP_HPC/projects/20211102_HP5_HIF_mTOR/R/s4-tss-definition/../../results/s4-tss-definition-and-tx-assignment/s4-1-tss-definition/s4-1-4-tss-by-dpi/dpi-output-bed/outCounts 
 mkdir -p /camp/home/sugimoy/home/CAMP_HPC/projects/20211102_HP5_HIF_mTOR/R/s4-tss-definition/../../results/s4-tss-definition-and-tx-assignment/s4-1-tss-definition/s4-1-4-tss-by-dpi/dpi-output-bed/outPooled 
 mkdir -p /camp/home/sugimoy/home/CAMP_HPC/projects/20211102_HP5_HIF_mTOR/R/s4-tss-definition/../../results/s4-tss-definition-and-tx-assignment/s4-1-tss-definition/s4-1-4-tss-by-dpi/dpi-output-bed/outTpm    
 mkdir -p /camp/home/sugimoy/home/CAMP_HPC/projects/20211102_HP5_HIF_mTOR/R/s4-tss-definition/../../results/s4-tss-definition-and-tx-assignment/s4-1-tss-definition/s4-1-4-tss-by-dpi/dpi-output-bed/log       
  |                                                                              |...............................                                       |  45%
  ordinary text without R code

  |                                                                              |.................................                                     |  47%
label: split_paraclu_by_dpi
  |                                                                              |...................................                                   |  50%
  ordinary text without R code

  |                                                                              |.....................................                                 |  53%
label: count_per_cluster
  |                                                                              |.......................................                               |  55%
  ordinary text without R code

  |                                                                              |.........................................                             |  58%
label: filter_with_untemplated_G_ratio (with options) 
List of 2
 $ fig.width : num 7
 $ fig.height: num 5

  |                                                                              |..........................................                            |  61%
  ordinary text without R code

  |                                                                              |............................................                          |  63%
label: filtering_by_expression_level
  |                                                                              |..............................................                        |  66%
  ordinary text without R code

  |                                                                              |................................................                      |  68%
label: annotate_TSS
  |                                                                              |..................................................                    |  71%
  ordinary text without R code

  |                                                                              |....................................................                  |  74%
label: mito_fileting
  |                                                                              |.....................................................                 |  76%
  ordinary text without R code

  |                                                                              |.......................................................               |  79%
label: filtering_by_expression_level_threshold
  |                                                                              |.........................................................             |  82%
  ordinary text without R code

  |                                                                              |...........................................................           |  84%
label: resplit_filtered_tss
  |                                                                              |.............................................................         |  87%
  ordinary text without R code

  |                                                                              |...............................................................       |  89%
label: cluster_width_calculation
  |                                                                              |................................................................      |  92%
  ordinary text without R code

  |                                                                              |..................................................................    |  95%
label: export_useful_data_and_functions
  |                                                                              |....................................................................  |  97%
  ordinary text without R code

  |                                                                              |......................................................................| 100%
label: sessionInfo

output file: s4-1-1-tss-definition_v3.knit.md

/camp/lab/ratcliffep/home/users/sugimoy/CAMP_HPC/software/miniconda3_20200606/envs/run_dpi_v2/bin/pandoc +RTS -K512m -RTS s4-1-1-tss-definition_v3.utf8.md --to gfm --from markdown+autolink_bare_uris+tex_math_single_backslash --output s4-1-1-tss-definition_v3.md --standalone --table-of-contents --toc-depth 2 --template /camp/lab/ratcliffep/home/users/sugimoy/CAMP_HPC/software/miniconda3_20200606/envs/run_dpi_v2/lib/R/library/rmarkdown/rmarkdown/templates/github_document/resources/default.md 
/camp/lab/ratcliffep/home/users/sugimoy/CAMP_HPC/software/miniconda3_20200606/envs/run_dpi_v2/bin/pandoc +RTS -K512m -RTS s4-1-1-tss-definition_v3.md --to html4 --from gfm --output s4-1-1-tss-definition_v3.html --standalone --self-contained --highlight-style pygments --template /camp/lab/ratcliffep/home/users/sugimoy/CAMP_HPC/software/miniconda3_20200606/envs/run_dpi_v2/lib/R/library/rmarkdown/rmarkdown/templates/github_document/resources/preview.html --variable 'github-markdown-css:/camp/lab/ratcliffep/home/users/sugimoy/CAMP_HPC/software/miniconda3_20200606/envs/run_dpi_v2/lib/R/library/rmarkdown/rmarkdown/templates/github_document/resources/github.css' --email-obfuscation none --metadata pagetitle=PREVIEW 

Preview created: s4-1-1-tss-definition_v3.html

Output created: s4-1-1-tss-definition_v3.md
> 
> if(TRUE){
+     full.rmd.path <- normalizePath(args[1])
+ 
+     doc.dir <- file.path(
+         gsub("/R/", "/doc/", dirname(full.rmd.path))
+     )
+ 
+     create.dir <- function(dir.name){
+         if(dir.exists(dir.name) == FALSE) {
+             dir.create(dir.name, recursive = TRUE)
+         }
+     }
+ 
+     create.dir(doc.dir)
+ 
+     ## Move knitr output files to doc dir
+     non.rmd.files <- grep(
+         list.files(
+             dirname(full.rmd.path),
+             pattern = gsub(".rmd", "", basename(full.rmd.path)),
+             full.names = TRUE
+         ),
+         pattern = ".rmd$",
+         inv = TRUE,
+         value = TRUE
+     )
+ 
+     non.rmd.files <- basename(non.rmd.files[!file.info(non.rmd.files)$isdir])
+     
+     file.rename(
+         from = file.path(dirname(full.rmd.path), non.rmd.files),
+         to = file.path(doc.dir, non.rmd.files)
+     )
+ 
+     ## If figure directory exists
+     non.rmd.dir <- file.path(gsub(".rmd", "_files", basename(full.rmd.path)))
+ 
+     if(dir.exists(file.path(dirname(full.rmd.path), non.rmd.dir))){
+ 
+         file.mv.cmd <- paste(
+             "rsync", "--remove-source-files", "-r",
+             file.path(dirname(full.rmd.path), non.rmd.dir),
+             file.path(doc.dir)
+         )
+ 
+         system(file.mv.cmd)
+ 
+         empty.file.rm.cmd <- paste(
+             "find",
+             file.path(dirname(full.rmd.path), non.rmd.dir),
+             "-type", "d",
+             "-empty", "-delete"
+         )
+ 
+         system(empty.file.rm.cmd)
+         
+     } else {"No output dir"}
+     
+ } else {
+     "knitr output not moved"
+ }
> 
> args <- commandArgs(trailingOnly = TRUE)
> 
> library(rmarkdown)
> rmarkdown::render(args[1])


processing file: s4-1-2-tss-definition_v2.rmd
  |                                                                              |                                                                      |   0%  |                                                                              |.......                                                               |  10%
   inline R code fragments

  |                                                                              |..............                                                        |  20%
label: knitr_setup
  |                                                                              |.....................                                                 |  30%
  ordinary text without R code

  |                                                                              |............................                                          |  40%
label: load_libraries (with options) 
List of 2
 $ message: logi FALSE
 $ warning: logi FALSE

Loading required package: GenomicRanges
Loading required package: stats4
Loading required package: BiocGenerics
Loading required package: parallel

Attaching package: 'BiocGenerics'

The following objects are masked from 'package:parallel':

    clusterApply, clusterApplyLB, clusterCall, clusterEvalQ,
    clusterExport, clusterMap, parApply, parCapply, parLapply,
    parLapplyLB, parRapply, parSapply, parSapplyLB

The following objects are masked from 'package:stats':

    IQR, mad, sd, var, xtabs

The following objects are masked from 'package:base':

    anyDuplicated, append, as.data.frame, basename, cbind, colnames,
    dirname, do.call, duplicated, eval, evalq, Filter, Find, get, grep,
    grepl, intersect, is.unsorted, lapply, Map, mapply, match, mget,
    order, paste, pmax, pmax.int, pmin, pmin.int, Position, rank,
    rbind, Reduce, rownames, sapply, setdiff, sort, table, tapply,
    union, unique, unsplit, which, which.max, which.min

Loading required package: S4Vectors

Attaching package: 'S4Vectors'

The following objects are masked from 'package:data.table':

    first, second

The following object is masked from 'package:base':

    expand.grid

Loading required package: IRanges

Attaching package: 'IRanges'

The following object is masked from 'package:data.table':

    shift

Loading required package: GenomeInfoDb
Loading required package: AnnotationDbi
Loading required package: Biobase
Welcome to Bioconductor

    Vignettes contain introductory material; view with
    'browseVignettes()'. To cite Bioconductor, see
    'citation("Biobase")', and for packages 'citation("pkgname")'.

Loading required package: SummarizedExperiment
Loading required package: DelayedArray
Loading required package: matrixStats

Attaching package: 'matrixStats'

The following objects are masked from 'package:Biobase':

    anyMissing, rowMedians

Loading required package: BiocParallel

Attaching package: 'DelayedArray'

The following objects are masked from 'package:matrixStats':

    colMaxs, colMins, colRanges, rowMaxs, rowMins, rowRanges

The following objects are masked from 'package:base':

    aperm, apply, rowsum

Loading required package: Biostrings
Loading required package: XVector

Attaching package: 'Biostrings'

The following object is masked from 'package:base':

    strsplit

Loading required package: Rsamtools

Attaching package: 'GenomicAlignments'

The following object is masked from 'package:data.table':

    last


Attaching package: 'dplyr'

The following objects are masked from 'package:GenomicAlignments':

    first, last

The following objects are masked from 'package:Biostrings':

    collapse, intersect, setdiff, setequal, union

The following object is masked from 'package:XVector':

    slice

The following object is masked from 'package:matrixStats':

    count

The following object is masked from 'package:AnnotationDbi':

    select

The following object is masked from 'package:Biobase':

    combine

The following objects are masked from 'package:GenomicRanges':

    intersect, setdiff, union

The following object is masked from 'package:GenomeInfoDb':

    intersect

The following objects are masked from 'package:IRanges':

    collapse, desc, intersect, setdiff, slice, union

The following objects are masked from 'package:S4Vectors':

    first, intersect, rename, setdiff, setequal, union

The following objects are masked from 'package:BiocGenerics':

    combine, intersect, setdiff, union

The following objects are masked from 'package:data.table':

    between, first, last

The following objects are masked from 'package:stats':

    filter, lag

The following objects are masked from 'package:base':

    intersect, setdiff, setequal, union

  |                                                                              |...................................                                   |  50%
  ordinary text without R code

  |                                                                              |..........................................                            |  60%
label: define_base_samples
  |                                                                              |.................................................                     |  70%
  ordinary text without R code

  |                                                                              |........................................................              |  80%
label: calculate_count_per_TSS_for_FANTOM
  |                                                                              |...............................................................       |  90%
  ordinary text without R code

  |                                                                              |......................................................................| 100%
label: sessionInfo

output file: s4-1-2-tss-definition_v2.knit.md

/camp/lab/ratcliffep/home/users/sugimoy/CAMP_HPC/software/miniconda3_20200606/envs/run_dpi_v2/bin/pandoc +RTS -K512m -RTS s4-1-2-tss-definition_v2.utf8.md --to gfm --from markdown+autolink_bare_uris+tex_math_single_backslash --output s4-1-2-tss-definition_v2.md --standalone --table-of-contents --toc-depth 2 --template /camp/lab/ratcliffep/home/users/sugimoy/CAMP_HPC/software/miniconda3_20200606/envs/run_dpi_v2/lib/R/library/rmarkdown/rmarkdown/templates/github_document/resources/default.md 
/camp/lab/ratcliffep/home/users/sugimoy/CAMP_HPC/software/miniconda3_20200606/envs/run_dpi_v2/bin/pandoc +RTS -K512m -RTS s4-1-2-tss-definition_v2.md --to html4 --from gfm --output s4-1-2-tss-definition_v2.html --standalone --self-contained --highlight-style pygments --template /camp/lab/ratcliffep/home/users/sugimoy/CAMP_HPC/software/miniconda3_20200606/envs/run_dpi_v2/lib/R/library/rmarkdown/rmarkdown/templates/github_document/resources/preview.html --variable 'github-markdown-css:/camp/lab/ratcliffep/home/users/sugimoy/CAMP_HPC/software/miniconda3_20200606/envs/run_dpi_v2/lib/R/library/rmarkdown/rmarkdown/templates/github_document/resources/github.css' --email-obfuscation none --metadata pagetitle=PREVIEW 

Preview created: s4-1-2-tss-definition_v2.html

Output created: s4-1-2-tss-definition_v2.md
> 
> if(TRUE){
+     full.rmd.path <- normalizePath(args[1])
+ 
+     doc.dir <- file.path(
+         gsub("/R/", "/doc/", dirname(full.rmd.path))
+     )
+ 
+     create.dir <- function(dir.name){
+         if(dir.exists(dir.name) == FALSE) {
+             dir.create(dir.name, recursive = TRUE)
+         }
+     }
+ 
+     create.dir(doc.dir)
+ 
+     ## Move knitr output files to doc dir
+     non.rmd.files <- grep(
+         list.files(
+             dirname(full.rmd.path),
+             pattern = gsub(".rmd", "", basename(full.rmd.path)),
+             full.names = TRUE
+         ),
+         pattern = ".rmd$",
+         inv = TRUE,
+         value = TRUE
+     )
+ 
+     non.rmd.files <- basename(non.rmd.files[!file.info(non.rmd.files)$isdir])
+     
+     file.rename(
+         from = file.path(dirname(full.rmd.path), non.rmd.files),
+         to = file.path(doc.dir, non.rmd.files)
+     )
+ 
+     ## If figure directory exists
+     non.rmd.dir <- file.path(gsub(".rmd", "_files", basename(full.rmd.path)))
+ 
+     if(dir.exists(file.path(dirname(full.rmd.path), non.rmd.dir))){
+ 
+         file.mv.cmd <- paste(
+             "rsync", "--remove-source-files", "-r",
+             file.path(dirname(full.rmd.path), non.rmd.dir),
+             file.path(doc.dir)
+         )
+ 
+         system(file.mv.cmd)
+ 
+         empty.file.rm.cmd <- paste(
+             "find",
+             file.path(dirname(full.rmd.path), non.rmd.dir),
+             "-type", "d",
+             "-empty", "-delete"
+         )
+ 
+         system(empty.file.rm.cmd)
+         
+     } else {"No output dir"}
+     
+ } else {
+     "knitr output not moved"
+ }
[1] "No output dir"
> 
> args <- commandArgs(trailingOnly = TRUE)
> 
> library(rmarkdown)
> rmarkdown::render(args[1])


processing file: s4-2-1-tx-tss-assignment-for-RCC4-v5.rmd
  |                                                                              |                                                                      |   0%  |                                                                              |.......                                                               |  10%
   inline R code fragments

  |                                                                              |..............                                                        |  20%
label: load_libraries (with options) 
List of 2
 $ message: logi FALSE
 $ warning: logi FALSE

Loading required package: GenomicRanges
Loading required package: stats4
Loading required package: BiocGenerics
Loading required package: parallel

Attaching package: 'BiocGenerics'

The following objects are masked from 'package:parallel':

    clusterApply, clusterApplyLB, clusterCall, clusterEvalQ,
    clusterExport, clusterMap, parApply, parCapply, parLapply,
    parLapplyLB, parRapply, parSapply, parSapplyLB

The following objects are masked from 'package:stats':

    IQR, mad, sd, var, xtabs

The following objects are masked from 'package:base':

    anyDuplicated, append, as.data.frame, basename, cbind, colnames,
    dirname, do.call, duplicated, eval, evalq, Filter, Find, get, grep,
    grepl, intersect, is.unsorted, lapply, Map, mapply, match, mget,
    order, paste, pmax, pmax.int, pmin, pmin.int, Position, rank,
    rbind, Reduce, rownames, sapply, setdiff, sort, table, tapply,
    union, unique, unsplit, which, which.max, which.min

Loading required package: S4Vectors

Attaching package: 'S4Vectors'

The following object is masked from 'package:base':

    expand.grid

Loading required package: IRanges
Loading required package: GenomeInfoDb
Loading required package: AnnotationDbi
Loading required package: Biobase
Welcome to Bioconductor

    Vignettes contain introductory material; view with
    'browseVignettes()'. To cite Bioconductor, see
    'citation("Biobase")', and for packages 'citation("pkgname")'.

Loading required package: SummarizedExperiment
Loading required package: DelayedArray
Loading required package: matrixStats

Attaching package: 'matrixStats'

The following objects are masked from 'package:Biobase':

    anyMissing, rowMedians


Attaching package: 'DelayedArray'

The following objects are masked from 'package:matrixStats':

    colMaxs, colMins, colRanges, rowMaxs, rowMins, rowRanges

The following objects are masked from 'package:base':

    aperm, apply, rowsum

Loading required package: Biostrings
Loading required package: XVector

Attaching package: 'Biostrings'

The following object is masked from 'package:base':

    strsplit

Loading required package: Rsamtools

Attaching package: 'dplyr'

The following objects are masked from 'package:GenomicAlignments':

    first, last

The following objects are masked from 'package:Biostrings':

    collapse, intersect, setdiff, setequal, union

The following object is masked from 'package:XVector':

    slice

The following object is masked from 'package:matrixStats':

    count

The following object is masked from 'package:AnnotationDbi':

    select

The following object is masked from 'package:Biobase':

    combine

The following objects are masked from 'package:GenomicRanges':

    intersect, setdiff, union

The following object is masked from 'package:GenomeInfoDb':

    intersect

The following objects are masked from 'package:IRanges':

    collapse, desc, intersect, setdiff, slice, union

The following objects are masked from 'package:S4Vectors':

    first, intersect, rename, setdiff, setequal, union

The following objects are masked from 'package:BiocGenerics':

    combine, intersect, setdiff, union

The following objects are masked from 'package:stats':

    filter, lag

The following objects are masked from 'package:base':

    intersect, setdiff, setequal, union


Attaching package: 'data.table'

The following objects are masked from 'package:dplyr':

    between, first, last

The following objects are masked from 'package:GenomicAlignments':

    first, last, second

The following object is masked from 'package:SummarizedExperiment':

    shift

The following object is masked from 'package:GenomicRanges':

    shift

The following object is masked from 'package:IRanges':

    shift

The following objects are masked from 'package:S4Vectors':

    first, second

  |                                                                              |.....................                                                 |  30%
  ordinary text without R code

  |                                                                              |............................                                          |  40%
label: define_input_variables
  |                                                                              |...................................                                   |  50%
  ordinary text without R code

  |                                                                              |..........................................                            |  60%
label: which_data_to_be_used
  |                                                                              |.................................................                     |  70%
  ordinary text without R code

  |                                                                              |........................................................              |  80%
label: assign_tx_to_tss
[bam_sort_core] merging from 3 files and 1 in-memory blocks...
[bam_sort_core] merging from 3 files and 1 in-memory blocks...
[bam_sort_core] merging from 4 files and 1 in-memory blocks...
[bam_sort_core] merging from 4 files and 1 in-memory blocks...
[bam_sort_core] merging from 4 files and 1 in-memory blocks...
[bam_sort_core] merging from 5 files and 1 in-memory blocks...
[bam_sort_core] merging from 3 files and 1 in-memory blocks...
[bam_sort_core] merging from 3 files and 1 in-memory blocks...
[bam_sort_core] merging from 4 files and 1 in-memory blocks...
[bam_sort_core] merging from 4 files and 1 in-memory blocks...
[bam_sort_core] merging from 4 files and 1 in-memory blocks...
[bam_sort_core] merging from 5 files and 1 in-memory blocks...
[bam_sort_core] merging from 1 files and 1 in-memory blocks...
[bam_sort_core] merging from 1 files and 1 in-memory blocks...
[bam_sort_core] merging from 32 files and 16 in-memory blocks...
[bam_sort_core] merging from 0 files and 16 in-memory blocks...
[bam_sort_core] merging from 0 files and 16 in-memory blocks...
[bam_sort_core] merging from 0 files and 16 in-memory blocks...
[bam_sort_core] merging from 0 files and 16 in-memory blocks...
[bam_sort_core] merging from 0 files and 16 in-memory blocks...
[bam_sort_core] merging from 0 files and 16 in-memory blocks...
[bam_sort_core] merging from 0 files and 16 in-memory blocks...
[bam_sort_core] merging from 0 files and 16 in-memory blocks...
[bam_sort_core] merging from 0 files and 16 in-memory blocks...
[bam_sort_core] merging from 0 files and 16 in-memory blocks...
[bam_sort_core] merging from 0 files and 16 in-memory blocks...
[bam_sort_core] merging from 0 files and 16 in-memory blocks...
[bam_sort_core] merging from 0 files and 16 in-memory blocks...
[bam_sort_core] merging from 0 files and 16 in-memory blocks...
  |                                                                              |...............................................................       |  90%
  ordinary text without R code

  |                                                                              |......................................................................| 100%
label: sessionInfo

output file: s4-2-1-tx-tss-assignment-for-RCC4-v5.knit.md

/camp/lab/ratcliffep/home/users/sugimoy/CAMP_HPC/software/miniconda3_20200606/envs/five_prime_seq_for_VHL_loss_v0.2.1/bin/pandoc +RTS -K512m -RTS s4-2-1-tx-tss-assignment-for-RCC4-v5.utf8.md --to gfm --from markdown+autolink_bare_uris+tex_math_single_backslash --output s4-2-1-tx-tss-assignment-for-RCC4-v5.md --standalone --table-of-contents --toc-depth 2 --template /camp/lab/ratcliffep/home/users/sugimoy/CAMP_HPC/software/miniconda3_20200606/envs/five_prime_seq_for_VHL_loss_v0.2.1/lib/R/library/rmarkdown/rmarkdown/templates/github_document/resources/default.md 
/camp/lab/ratcliffep/home/users/sugimoy/CAMP_HPC/software/miniconda3_20200606/envs/five_prime_seq_for_VHL_loss_v0.2.1/bin/pandoc +RTS -K512m -RTS s4-2-1-tx-tss-assignment-for-RCC4-v5.md --to html4 --from gfm --output s4-2-1-tx-tss-assignment-for-RCC4-v5.html --standalone --self-contained --highlight-style pygments --template /camp/lab/ratcliffep/home/users/sugimoy/CAMP_HPC/software/miniconda3_20200606/envs/five_prime_seq_for_VHL_loss_v0.2.1/lib/R/library/rmarkdown/rmarkdown/templates/github_document/resources/preview.html --variable 'github-markdown-css:/camp/lab/ratcliffep/home/users/sugimoy/CAMP_HPC/software/miniconda3_20200606/envs/five_prime_seq_for_VHL_loss_v0.2.1/lib/R/library/rmarkdown/rmarkdown/templates/github_document/resources/github.css' --email-obfuscation none --metadata pagetitle=PREVIEW 

Preview created: s4-2-1-tx-tss-assignment-for-RCC4-v5.html

Output created: s4-2-1-tx-tss-assignment-for-RCC4-v5.md
> 
> if(TRUE){
+     full.rmd.path <- normalizePath(args[1])
+ 
+     doc.dir <- file.path(
+         gsub("/R/", "/doc/", dirname(full.rmd.path))
+     )
+ 
+     create.dir <- function(dir.name){
+         if(dir.exists(dir.name) == FALSE) {
+             dir.create(dir.name, recursive = TRUE)
+         }
+     }
+ 
+     create.dir(doc.dir)
+ 
+     ## Move knitr output files to doc dir
+     non.rmd.files <- grep(
+         list.files(
+             dirname(full.rmd.path),
+             pattern = gsub(".rmd", "", basename(full.rmd.path)),
+             full.names = TRUE
+         ),
+         pattern = ".rmd$",
+         inv = TRUE,
+         value = TRUE
+     )
+ 
+     non.rmd.files <- basename(non.rmd.files[!file.info(non.rmd.files)$isdir])
+     
+     file.rename(
+         from = file.path(dirname(full.rmd.path), non.rmd.files),
+         to = file.path(doc.dir, non.rmd.files)
+     )
+ 
+     ## If figure directory exists
+     non.rmd.dir <- file.path(gsub(".rmd", "_files", basename(full.rmd.path)))
+ 
+     if(dir.exists(file.path(dirname(full.rmd.path), non.rmd.dir))){
+ 
+         file.mv.cmd <- paste(
+             "rsync", "--remove-source-files", "-r",
+             file.path(dirname(full.rmd.path), non.rmd.dir),
+             file.path(doc.dir)
+         )
+ 
+         system(file.mv.cmd)
+ 
+         empty.file.rm.cmd <- paste(
+             "find",
+             file.path(dirname(full.rmd.path), non.rmd.dir),
+             "-type", "d",
+             "-empty", "-delete"
+         )
+ 
+         system(empty.file.rm.cmd)
+         
+     } else {"No output dir"}
+     
+ } else {
+     "knitr output not moved"
+ }
[1] "No output dir"
> 
> args <- commandArgs(trailingOnly = TRUE)
> 
> library(rmarkdown)
> rmarkdown::render(args[1])


processing file: s4-3-1-extract-tx-information-for-RCC4-v2.rmd
  |                                                                              |                                                                      |   0%  |                                                                              |.......                                                               |  10%
   inline R code fragments

  |                                                                              |..............                                                        |  20%
label: load_libraries (with options) 
List of 2
 $ message: logi FALSE
 $ warning: logi FALSE

Loading required package: GenomicRanges
Loading required package: stats4
Loading required package: BiocGenerics
Loading required package: parallel

Attaching package: 'BiocGenerics'

The following objects are masked from 'package:parallel':

    clusterApply, clusterApplyLB, clusterCall, clusterEvalQ,
    clusterExport, clusterMap, parApply, parCapply, parLapply,
    parLapplyLB, parRapply, parSapply, parSapplyLB

The following objects are masked from 'package:stats':

    IQR, mad, sd, var, xtabs

The following objects are masked from 'package:base':

    anyDuplicated, append, as.data.frame, basename, cbind, colnames,
    dirname, do.call, duplicated, eval, evalq, Filter, Find, get, grep,
    grepl, intersect, is.unsorted, lapply, Map, mapply, match, mget,
    order, paste, pmax, pmax.int, pmin, pmin.int, Position, rank,
    rbind, Reduce, rownames, sapply, setdiff, sort, table, tapply,
    union, unique, unsplit, which, which.max, which.min

Loading required package: S4Vectors

Attaching package: 'S4Vectors'

The following object is masked from 'package:base':

    expand.grid

Loading required package: IRanges
Loading required package: GenomeInfoDb
Loading required package: AnnotationDbi
Loading required package: Biobase
Welcome to Bioconductor

    Vignettes contain introductory material; view with
    'browseVignettes()'. To cite Bioconductor, see
    'citation("Biobase")', and for packages 'citation("pkgname")'.

Loading required package: SummarizedExperiment
Loading required package: DelayedArray
Loading required package: matrixStats

Attaching package: 'matrixStats'

The following objects are masked from 'package:Biobase':

    anyMissing, rowMedians


Attaching package: 'DelayedArray'

The following objects are masked from 'package:matrixStats':

    colMaxs, colMins, colRanges, rowMaxs, rowMins, rowRanges

The following objects are masked from 'package:base':

    aperm, apply, rowsum

Loading required package: Biostrings
Loading required package: XVector

Attaching package: 'Biostrings'

The following object is masked from 'package:base':

    strsplit

Loading required package: Rsamtools

Attaching package: 'dplyr'

The following objects are masked from 'package:GenomicAlignments':

    first, last

The following objects are masked from 'package:Biostrings':

    collapse, intersect, setdiff, setequal, union

The following object is masked from 'package:XVector':

    slice

The following object is masked from 'package:matrixStats':

    count

The following object is masked from 'package:AnnotationDbi':

    select

The following object is masked from 'package:Biobase':

    combine

The following objects are masked from 'package:GenomicRanges':

    intersect, setdiff, union

The following object is masked from 'package:GenomeInfoDb':

    intersect

The following objects are masked from 'package:IRanges':

    collapse, desc, intersect, setdiff, slice, union

The following objects are masked from 'package:S4Vectors':

    first, intersect, rename, setdiff, setequal, union

The following objects are masked from 'package:BiocGenerics':

    combine, intersect, setdiff, union

The following objects are masked from 'package:stats':

    filter, lag

The following objects are masked from 'package:base':

    intersect, setdiff, setequal, union


Attaching package: 'data.table'

The following objects are masked from 'package:dplyr':

    between, first, last

The following objects are masked from 'package:GenomicAlignments':

    first, last, second

The following object is masked from 'package:SummarizedExperiment':

    shift

The following object is masked from 'package:GenomicRanges':

    shift

The following object is masked from 'package:IRanges':

    shift

The following objects are masked from 'package:S4Vectors':

    first, second

  |                                                                              |.....................                                                 |  30%
  ordinary text without R code

  |                                                                              |............................                                          |  40%
label: define_base_variables
  |                                                                              |...................................                                   |  50%
  ordinary text without R code

  |                                                                              |..........................................                            |  60%
label: calc_read_count_per_pos_per_tss
  |                                                                              |.................................................                     |  70%
  ordinary text without R code

  |                                                                              |........................................................              |  80%
label: export_tx_meta_infor
  |                                                                              |...............................................................       |  90%
  ordinary text without R code

  |                                                                              |......................................................................| 100%
label: sessionInfo

output file: s4-3-1-extract-tx-information-for-RCC4-v2.knit.md

/camp/lab/ratcliffep/home/users/sugimoy/CAMP_HPC/software/miniconda3_20200606/envs/five_prime_seq_for_VHL_loss_v0.2.1/bin/pandoc +RTS -K512m -RTS s4-3-1-extract-tx-information-for-RCC4-v2.utf8.md --to gfm --from markdown+autolink_bare_uris+tex_math_single_backslash --output s4-3-1-extract-tx-information-for-RCC4-v2.md --standalone --table-of-contents --toc-depth 2 --template /camp/lab/ratcliffep/home/users/sugimoy/CAMP_HPC/software/miniconda3_20200606/envs/five_prime_seq_for_VHL_loss_v0.2.1/lib/R/library/rmarkdown/rmarkdown/templates/github_document/resources/default.md 
/camp/lab/ratcliffep/home/users/sugimoy/CAMP_HPC/software/miniconda3_20200606/envs/five_prime_seq_for_VHL_loss_v0.2.1/bin/pandoc +RTS -K512m -RTS s4-3-1-extract-tx-information-for-RCC4-v2.md --to html4 --from gfm --output s4-3-1-extract-tx-information-for-RCC4-v2.html --standalone --self-contained --highlight-style pygments --template /camp/lab/ratcliffep/home/users/sugimoy/CAMP_HPC/software/miniconda3_20200606/envs/five_prime_seq_for_VHL_loss_v0.2.1/lib/R/library/rmarkdown/rmarkdown/templates/github_document/resources/preview.html --variable 'github-markdown-css:/camp/lab/ratcliffep/home/users/sugimoy/CAMP_HPC/software/miniconda3_20200606/envs/five_prime_seq_for_VHL_loss_v0.2.1/lib/R/library/rmarkdown/rmarkdown/templates/github_document/resources/github.css' --email-obfuscation none --metadata pagetitle=PREVIEW 

Preview created: s4-3-1-extract-tx-information-for-RCC4-v2.html

Output created: s4-3-1-extract-tx-information-for-RCC4-v2.md
> 
> if(TRUE){
+     full.rmd.path <- normalizePath(args[1])
+ 
+     doc.dir <- file.path(
+         gsub("/R/", "/doc/", dirname(full.rmd.path))
+     )
+ 
+     create.dir <- function(dir.name){
+         if(dir.exists(dir.name) == FALSE) {
+             dir.create(dir.name, recursive = TRUE)
+         }
+     }
+ 
+     create.dir(doc.dir)
+ 
+     ## Move knitr output files to doc dir
+     non.rmd.files <- grep(
+         list.files(
+             dirname(full.rmd.path),
+             pattern = gsub(".rmd", "", basename(full.rmd.path)),
+             full.names = TRUE
+         ),
+         pattern = ".rmd$",
+         inv = TRUE,
+         value = TRUE
+     )
+ 
+     non.rmd.files <- basename(non.rmd.files[!file.info(non.rmd.files)$isdir])
+     
+     file.rename(
+         from = file.path(dirname(full.rmd.path), non.rmd.files),
+         to = file.path(doc.dir, non.rmd.files)
+     )
+ 
+     ## If figure directory exists
+     non.rmd.dir <- file.path(gsub(".rmd", "_files", basename(full.rmd.path)))
+ 
+     if(dir.exists(file.path(dirname(full.rmd.path), non.rmd.dir))){
+ 
+         file.mv.cmd <- paste(
+             "rsync", "--remove-source-files", "-r",
+             file.path(dirname(full.rmd.path), non.rmd.dir),
+             file.path(doc.dir)
+         )
+ 
+         system(file.mv.cmd)
+ 
+         empty.file.rm.cmd <- paste(
+             "find",
+             file.path(dirname(full.rmd.path), non.rmd.dir),
+             "-type", "d",
+             "-empty", "-delete"
+         )
+ 
+         system(empty.file.rm.cmd)
+         
+     } else {"No output dir"}
+     
+ } else {
+     "knitr output not moved"
+ }
[1] "No output dir"
> 
> args <- commandArgs(trailingOnly = TRUE)
> 
> library(rmarkdown)
> rmarkdown::render(args[1])


processing file: s4-2-2-tx-tss-assignment-for-786O-v5.rmd
  |                                                                              |                                                                      |   0%  |                                                                              |.......                                                               |  10%
   inline R code fragments

  |                                                                              |..............                                                        |  20%
label: load_libraries (with options) 
List of 2
 $ message: logi FALSE
 $ warning: logi FALSE

Loading required package: GenomicRanges
Loading required package: stats4
Loading required package: BiocGenerics
Loading required package: parallel

Attaching package: 'BiocGenerics'

The following objects are masked from 'package:parallel':

    clusterApply, clusterApplyLB, clusterCall, clusterEvalQ,
    clusterExport, clusterMap, parApply, parCapply, parLapply,
    parLapplyLB, parRapply, parSapply, parSapplyLB

The following objects are masked from 'package:stats':

    IQR, mad, sd, var, xtabs

The following objects are masked from 'package:base':

    anyDuplicated, append, as.data.frame, basename, cbind, colnames,
    dirname, do.call, duplicated, eval, evalq, Filter, Find, get, grep,
    grepl, intersect, is.unsorted, lapply, Map, mapply, match, mget,
    order, paste, pmax, pmax.int, pmin, pmin.int, Position, rank,
    rbind, Reduce, rownames, sapply, setdiff, sort, table, tapply,
    union, unique, unsplit, which, which.max, which.min

Loading required package: S4Vectors

Attaching package: 'S4Vectors'

The following object is masked from 'package:base':

    expand.grid

Loading required package: IRanges
Loading required package: GenomeInfoDb
Loading required package: AnnotationDbi
Loading required package: Biobase
Welcome to Bioconductor

    Vignettes contain introductory material; view with
    'browseVignettes()'. To cite Bioconductor, see
    'citation("Biobase")', and for packages 'citation("pkgname")'.

Loading required package: SummarizedExperiment
Loading required package: DelayedArray
Loading required package: matrixStats

Attaching package: 'matrixStats'

The following objects are masked from 'package:Biobase':

    anyMissing, rowMedians


Attaching package: 'DelayedArray'

The following objects are masked from 'package:matrixStats':

    colMaxs, colMins, colRanges, rowMaxs, rowMins, rowRanges

The following objects are masked from 'package:base':

    aperm, apply, rowsum

Loading required package: Biostrings
Loading required package: XVector

Attaching package: 'Biostrings'

The following object is masked from 'package:base':

    strsplit

Loading required package: Rsamtools

Attaching package: 'dplyr'

The following objects are masked from 'package:GenomicAlignments':

    first, last

The following objects are masked from 'package:Biostrings':

    collapse, intersect, setdiff, setequal, union

The following object is masked from 'package:XVector':

    slice

The following object is masked from 'package:matrixStats':

    count

The following object is masked from 'package:AnnotationDbi':

    select

The following object is masked from 'package:Biobase':

    combine

The following objects are masked from 'package:GenomicRanges':

    intersect, setdiff, union

The following object is masked from 'package:GenomeInfoDb':

    intersect

The following objects are masked from 'package:IRanges':

    collapse, desc, intersect, setdiff, slice, union

The following objects are masked from 'package:S4Vectors':

    first, intersect, rename, setdiff, setequal, union

The following objects are masked from 'package:BiocGenerics':

    combine, intersect, setdiff, union

The following objects are masked from 'package:stats':

    filter, lag

The following objects are masked from 'package:base':

    intersect, setdiff, setequal, union


Attaching package: 'data.table'

The following objects are masked from 'package:dplyr':

    between, first, last

The following objects are masked from 'package:GenomicAlignments':

    first, last, second

The following object is masked from 'package:SummarizedExperiment':

    shift

The following object is masked from 'package:GenomicRanges':

    shift

The following object is masked from 'package:IRanges':

    shift

The following objects are masked from 'package:S4Vectors':

    first, second

  |                                                                              |.....................                                                 |  30%
  ordinary text without R code

  |                                                                              |............................                                          |  40%
label: define_input_variables
  |                                                                              |...................................                                   |  50%
  ordinary text without R code

  |                                                                              |..........................................                            |  60%
label: which_data_to_be_used
  |                                                                              |.................................................                     |  70%
  ordinary text without R code

  |                                                                              |........................................................              |  80%
label: assign_tx_to_tss
[bam_sort_core] merging from 1 files and 1 in-memory blocks...
[bam_sort_core] merging from 1 files and 1 in-memory blocks...
[bam_sort_core] merging from 2 files and 1 in-memory blocks...
[bam_sort_core] merging from 2 files and 1 in-memory blocks...
[bam_sort_core] merging from 2 files and 1 in-memory blocks...
[bam_sort_core] merging from 2 files and 1 in-memory blocks...
[bam_sort_core] merging from 2 files and 1 in-memory blocks...
[bam_sort_core] merging from 1 files and 1 in-memory blocks...
[bam_sort_core] merging from 2 files and 1 in-memory blocks...
[bam_sort_core] merging from 1 files and 1 in-memory blocks...
[bam_sort_core] merging from 2 files and 1 in-memory blocks...
[bam_sort_core] merging from 2 files and 1 in-memory blocks...
[bam_sort_core] merging from 2 files and 1 in-memory blocks...
[bam_sort_core] merging from 2 files and 1 in-memory blocks...
[bam_sort_core] merging from 2 files and 1 in-memory blocks...
[bam_sort_core] merging from 2 files and 1 in-memory blocks...
[bam_sort_core] merging from 16 files and 16 in-memory blocks...
[bam_sort_core] merging from 0 files and 16 in-memory blocks...
[bam_sort_core] merging from 0 files and 16 in-memory blocks...
[bam_sort_core] merging from 0 files and 16 in-memory blocks...
[bam_sort_core] merging from 0 files and 16 in-memory blocks...
[bam_sort_core] merging from 0 files and 16 in-memory blocks...
[bam_sort_core] merging from 0 files and 16 in-memory blocks...
[bam_sort_core] merging from 0 files and 16 in-memory blocks...
[bam_sort_core] merging from 0 files and 16 in-memory blocks...
[bam_sort_core] merging from 0 files and 16 in-memory blocks...
[bam_sort_core] merging from 0 files and 16 in-memory blocks...
[bam_sort_core] merging from 0 files and 16 in-memory blocks...
[bam_sort_core] merging from 0 files and 16 in-memory blocks...
[bam_sort_core] merging from 0 files and 16 in-memory blocks...
  |                                                                              |...............................................................       |  90%
  ordinary text without R code

  |                                                                              |......................................................................| 100%
label: sessionInfo

output file: s4-2-2-tx-tss-assignment-for-786O-v5.knit.md

/camp/lab/ratcliffep/home/users/sugimoy/CAMP_HPC/software/miniconda3_20200606/envs/five_prime_seq_for_VHL_loss_v0.2.1/bin/pandoc +RTS -K512m -RTS s4-2-2-tx-tss-assignment-for-786O-v5.utf8.md --to gfm --from markdown+autolink_bare_uris+tex_math_single_backslash --output s4-2-2-tx-tss-assignment-for-786O-v5.md --standalone --table-of-contents --toc-depth 2 --template /camp/lab/ratcliffep/home/users/sugimoy/CAMP_HPC/software/miniconda3_20200606/envs/five_prime_seq_for_VHL_loss_v0.2.1/lib/R/library/rmarkdown/rmarkdown/templates/github_document/resources/default.md 
/camp/lab/ratcliffep/home/users/sugimoy/CAMP_HPC/software/miniconda3_20200606/envs/five_prime_seq_for_VHL_loss_v0.2.1/bin/pandoc +RTS -K512m -RTS s4-2-2-tx-tss-assignment-for-786O-v5.md --to html4 --from gfm --output s4-2-2-tx-tss-assignment-for-786O-v5.html --standalone --self-contained --highlight-style pygments --template /camp/lab/ratcliffep/home/users/sugimoy/CAMP_HPC/software/miniconda3_20200606/envs/five_prime_seq_for_VHL_loss_v0.2.1/lib/R/library/rmarkdown/rmarkdown/templates/github_document/resources/preview.html --variable 'github-markdown-css:/camp/lab/ratcliffep/home/users/sugimoy/CAMP_HPC/software/miniconda3_20200606/envs/five_prime_seq_for_VHL_loss_v0.2.1/lib/R/library/rmarkdown/rmarkdown/templates/github_document/resources/github.css' --email-obfuscation none --metadata pagetitle=PREVIEW 

Preview created: s4-2-2-tx-tss-assignment-for-786O-v5.html

Output created: s4-2-2-tx-tss-assignment-for-786O-v5.md
> 
> if(TRUE){
+     full.rmd.path <- normalizePath(args[1])
+ 
+     doc.dir <- file.path(
+         gsub("/R/", "/doc/", dirname(full.rmd.path))
+     )
+ 
+     create.dir <- function(dir.name){
+         if(dir.exists(dir.name) == FALSE) {
+             dir.create(dir.name, recursive = TRUE)
+         }
+     }
+ 
+     create.dir(doc.dir)
+ 
+     ## Move knitr output files to doc dir
+     non.rmd.files <- grep(
+         list.files(
+             dirname(full.rmd.path),
+             pattern = gsub(".rmd", "", basename(full.rmd.path)),
+             full.names = TRUE
+         ),
+         pattern = ".rmd$",
+         inv = TRUE,
+         value = TRUE
+     )
+ 
+     non.rmd.files <- basename(non.rmd.files[!file.info(non.rmd.files)$isdir])
+     
+     file.rename(
+         from = file.path(dirname(full.rmd.path), non.rmd.files),
+         to = file.path(doc.dir, non.rmd.files)
+     )
+ 
+     ## If figure directory exists
+     non.rmd.dir <- file.path(gsub(".rmd", "_files", basename(full.rmd.path)))
+ 
+     if(dir.exists(file.path(dirname(full.rmd.path), non.rmd.dir))){
+ 
+         file.mv.cmd <- paste(
+             "rsync", "--remove-source-files", "-r",
+             file.path(dirname(full.rmd.path), non.rmd.dir),
+             file.path(doc.dir)
+         )
+ 
+         system(file.mv.cmd)
+ 
+         empty.file.rm.cmd <- paste(
+             "find",
+             file.path(dirname(full.rmd.path), non.rmd.dir),
+             "-type", "d",
+             "-empty", "-delete"
+         )
+ 
+         system(empty.file.rm.cmd)
+         
+     } else {"No output dir"}
+     
+ } else {
+     "knitr output not moved"
+ }
[1] "No output dir"
> 
> args <- commandArgs(trailingOnly = TRUE)
> 
> library(rmarkdown)
> rmarkdown::render(args[1])


processing file: s4-3-2-extract-tx-information-for-786O-v2.rmd
  |                                                                              |                                                                      |   0%  |                                                                              |.......                                                               |  10%
   inline R code fragments

  |                                                                              |..............                                                        |  20%
label: load_libraries (with options) 
List of 2
 $ message: logi FALSE
 $ warning: logi FALSE

Loading required package: GenomicRanges
Loading required package: stats4
Loading required package: BiocGenerics
Loading required package: parallel

Attaching package: 'BiocGenerics'

The following objects are masked from 'package:parallel':

    clusterApply, clusterApplyLB, clusterCall, clusterEvalQ,
    clusterExport, clusterMap, parApply, parCapply, parLapply,
    parLapplyLB, parRapply, parSapply, parSapplyLB

The following objects are masked from 'package:stats':

    IQR, mad, sd, var, xtabs

The following objects are masked from 'package:base':

    anyDuplicated, append, as.data.frame, basename, cbind, colnames,
    dirname, do.call, duplicated, eval, evalq, Filter, Find, get, grep,
    grepl, intersect, is.unsorted, lapply, Map, mapply, match, mget,
    order, paste, pmax, pmax.int, pmin, pmin.int, Position, rank,
    rbind, Reduce, rownames, sapply, setdiff, sort, table, tapply,
    union, unique, unsplit, which, which.max, which.min

Loading required package: S4Vectors

Attaching package: 'S4Vectors'

The following object is masked from 'package:base':

    expand.grid

Loading required package: IRanges
Loading required package: GenomeInfoDb
Loading required package: AnnotationDbi
Loading required package: Biobase
Welcome to Bioconductor

    Vignettes contain introductory material; view with
    'browseVignettes()'. To cite Bioconductor, see
    'citation("Biobase")', and for packages 'citation("pkgname")'.

Loading required package: SummarizedExperiment
Loading required package: DelayedArray
Loading required package: matrixStats

Attaching package: 'matrixStats'

The following objects are masked from 'package:Biobase':

    anyMissing, rowMedians


Attaching package: 'DelayedArray'

The following objects are masked from 'package:matrixStats':

    colMaxs, colMins, colRanges, rowMaxs, rowMins, rowRanges

The following objects are masked from 'package:base':

    aperm, apply, rowsum

Loading required package: Biostrings
Loading required package: XVector

Attaching package: 'Biostrings'

The following object is masked from 'package:base':

    strsplit

Loading required package: Rsamtools

Attaching package: 'dplyr'

The following objects are masked from 'package:GenomicAlignments':

    first, last

The following objects are masked from 'package:Biostrings':

    collapse, intersect, setdiff, setequal, union

The following object is masked from 'package:XVector':

    slice

The following object is masked from 'package:matrixStats':

    count

The following object is masked from 'package:AnnotationDbi':

    select

The following object is masked from 'package:Biobase':

    combine

The following objects are masked from 'package:GenomicRanges':

    intersect, setdiff, union

The following object is masked from 'package:GenomeInfoDb':

    intersect

The following objects are masked from 'package:IRanges':

    collapse, desc, intersect, setdiff, slice, union

The following objects are masked from 'package:S4Vectors':

    first, intersect, rename, setdiff, setequal, union

The following objects are masked from 'package:BiocGenerics':

    combine, intersect, setdiff, union

The following objects are masked from 'package:stats':

    filter, lag

The following objects are masked from 'package:base':

    intersect, setdiff, setequal, union


Attaching package: 'data.table'

The following objects are masked from 'package:dplyr':

    between, first, last

The following objects are masked from 'package:GenomicAlignments':

    first, last, second

The following object is masked from 'package:SummarizedExperiment':

    shift

The following object is masked from 'package:GenomicRanges':

    shift

The following object is masked from 'package:IRanges':

    shift

The following objects are masked from 'package:S4Vectors':

    first, second

  |                                                                              |.....................                                                 |  30%
  ordinary text without R code

  |                                                                              |............................                                          |  40%
label: define_base_variables
  |                                                                              |...................................                                   |  50%
  ordinary text without R code

  |                                                                              |..........................................                            |  60%
label: calc_read_count_per_pos_per_tss
  |                                                                              |.................................................                     |  70%
  ordinary text without R code

  |                                                                              |........................................................              |  80%
label: export_tx_meta_infor
  |                                                                              |...............................................................       |  90%
  ordinary text without R code

  |                                                                              |......................................................................| 100%
label: sessionInfo

output file: s4-3-2-extract-tx-information-for-786O-v2.knit.md

/camp/lab/ratcliffep/home/users/sugimoy/CAMP_HPC/software/miniconda3_20200606/envs/five_prime_seq_for_VHL_loss_v0.2.1/bin/pandoc +RTS -K512m -RTS s4-3-2-extract-tx-information-for-786O-v2.utf8.md --to gfm --from markdown+autolink_bare_uris+tex_math_single_backslash --output s4-3-2-extract-tx-information-for-786O-v2.md --standalone --table-of-contents --toc-depth 2 --template /camp/lab/ratcliffep/home/users/sugimoy/CAMP_HPC/software/miniconda3_20200606/envs/five_prime_seq_for_VHL_loss_v0.2.1/lib/R/library/rmarkdown/rmarkdown/templates/github_document/resources/default.md 
/camp/lab/ratcliffep/home/users/sugimoy/CAMP_HPC/software/miniconda3_20200606/envs/five_prime_seq_for_VHL_loss_v0.2.1/bin/pandoc +RTS -K512m -RTS s4-3-2-extract-tx-information-for-786O-v2.md --to html4 --from gfm --output s4-3-2-extract-tx-information-for-786O-v2.html --standalone --self-contained --highlight-style pygments --template /camp/lab/ratcliffep/home/users/sugimoy/CAMP_HPC/software/miniconda3_20200606/envs/five_prime_seq_for_VHL_loss_v0.2.1/lib/R/library/rmarkdown/rmarkdown/templates/github_document/resources/preview.html --variable 'github-markdown-css:/camp/lab/ratcliffep/home/users/sugimoy/CAMP_HPC/software/miniconda3_20200606/envs/five_prime_seq_for_VHL_loss_v0.2.1/lib/R/library/rmarkdown/rmarkdown/templates/github_document/resources/github.css' --email-obfuscation none --metadata pagetitle=PREVIEW 

Preview created: s4-3-2-extract-tx-information-for-786O-v2.html

Output created: s4-3-2-extract-tx-information-for-786O-v2.md
> 
> if(TRUE){
+     full.rmd.path <- normalizePath(args[1])
+ 
+     doc.dir <- file.path(
+         gsub("/R/", "/doc/", dirname(full.rmd.path))
+     )
+ 
+     create.dir <- function(dir.name){
+         if(dir.exists(dir.name) == FALSE) {
+             dir.create(dir.name, recursive = TRUE)
+         }
+     }
+ 
+     create.dir(doc.dir)
+ 
+     ## Move knitr output files to doc dir
+     non.rmd.files <- grep(
+         list.files(
+             dirname(full.rmd.path),
+             pattern = gsub(".rmd", "", basename(full.rmd.path)),
+             full.names = TRUE
+         ),
+         pattern = ".rmd$",
+         inv = TRUE,
+         value = TRUE
+     )
+ 
+     non.rmd.files <- basename(non.rmd.files[!file.info(non.rmd.files)$isdir])
+     
+     file.rename(
+         from = file.path(dirname(full.rmd.path), non.rmd.files),
+         to = file.path(doc.dir, non.rmd.files)
+     )
+ 
+     ## If figure directory exists
+     non.rmd.dir <- file.path(gsub(".rmd", "_files", basename(full.rmd.path)))
+ 
+     if(dir.exists(file.path(dirname(full.rmd.path), non.rmd.dir))){
+ 
+         file.mv.cmd <- paste(
+             "rsync", "--remove-source-files", "-r",
+             file.path(dirname(full.rmd.path), non.rmd.dir),
+             file.path(doc.dir)
+         )
+ 
+         system(file.mv.cmd)
+ 
+         empty.file.rm.cmd <- paste(
+             "find",
+             file.path(dirname(full.rmd.path), non.rmd.dir),
+             "-type", "d",
+             "-empty", "-delete"
+         )
+ 
+         system(empty.file.rm.cmd)
+         
+     } else {"No output dir"}
+     
+ } else {
+     "knitr output not moved"
+ }
[1] "No output dir"
> 
